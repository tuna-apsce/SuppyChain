<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agricultural Product Tracking</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="assets/css/main.css" rel="stylesheet">
    <link href="assets/css/components.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">
                <i class="fas fa-seedling me-2"></i>AgriTrace
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
            <li class="nav-item">
                <a class="nav-link" href="#features">Features</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#about">About Us</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="register.html">
                    <i class="fas fa-user-plus me-1"></i>Register
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="admin-setup.html">
                    <i class="fas fa-users-cog me-1"></i>Admin
                </a>
            </li>
            <li class="nav-item">
                <button class="btn btn-outline-light ms-2" id="connectWalletBtn">
                    <i class="fas fa-wallet me-1"></i>Connect Wallet
                </button>
            </li>
        </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center min-vh-100">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold text-white mb-4">
                        Track Your Food From Farm to Table
                    </h1>
                    <p class="lead text-white mb-4">
                        A decentralized blockchain-based traceability system that ensures transparency, 
                        authenticity, and quality throughout the agricultural supply chain.
                    </p>
                    <div class="d-flex gap-3 flex-wrap justify-content-center">
                        <button class="btn btn-success btn-lg" id="scanQRBtn">
                            <i class="fas fa-qrcode me-2"></i>Scan QR Code
                        </button>
                        <a href="register.html" class="btn btn-primary btn-lg">
                            <i class="fas fa-user-plus me-2"></i>Register Now
                        </a>
                        <button class="btn btn-outline-light btn-lg" id="learnMoreBtn">
                            Learn More
                        </button>
                    </div>
                </div>
                <div class="col-lg-6 text-center">
                    <div class="qr-scanner-container">
                        <video id="qrVideo" class="d-none" autoplay playsinline></video>
                        <canvas id="qrCanvas" class="d-none"></canvas>
                        <div id="qrScannerPlaceholder" class="qr-placeholder">
                            <i class="fas fa-qrcode fa-5x text-white mb-3"></i>
                            <h4 class="text-white">Ready to Scan</h4>
                            <p class="text-white-50">Point your camera at a product QR code</p>
                        </div>
                        <div id="qrResult" class="qr-result d-none">
                            <div class="alert alert-success">
                                <i class="fas fa-check-circle me-2"></i>
                                QR Code Detected: <span id="detectedBatchId"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- QR Scanner Modal -->
    <div class="modal fade" id="qrScannerModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-qrcode me-2"></i>QR Code Scanner
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <div id="scannerContainer" class="scanner-container">
                        <video id="scannerVideo" autoplay playsinline class="w-100"></video>
                        <canvas id="scannerCanvas" class="d-none"></canvas>
                        <div id="scannerOverlay" class="scanner-overlay">
                            <div class="scanner-frame"></div>
                        </div>
                    </div>
                    <div id="scannerResult" class="mt-3 d-none">
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle me-2"></i>
                            Batch ID: <strong id="scannedBatchId"></strong>
                        </div>
                        <button class="btn btn-primary" id="viewProductBtn">
                            View Product Details
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Product History Modal -->
    <div class="modal fade" id="productHistoryModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-history me-2"></i>Product History
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="productLoading" class="text-center py-5">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-3">Loading product information...</p>
                    </div>
                    <div id="productContent" class="d-none">
                        <!-- Product details will be loaded here -->
                    </div>
                    <div id="productError" class="alert alert-danger d-none">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                <span id="productErrorMessage"></span>
                            </div>
                            <button id="retryButton" class="btn btn-sm btn-outline-danger" onclick="retryProductLoad()">
                                <i class="fas fa-redo me-1"></i>Retry
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <section id="features" class="py-5 bg-light">
        <div class="container">
            <div class="row text-center mb-5">
                <div class="col-12">
                    <h2 class="display-5 fw-bold">Key Features</h2>
                    <p class="lead">Revolutionary blockchain technology for agricultural traceability</p>
                </div>
            </div>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h4>Transparent & Secure</h4>
                        <p>Immutable blockchain records ensure data integrity and prevent tampering</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h4>Real-time Tracking</h4>
                        <p>Track products through every step of the supply chain with real-time updates</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h4>Mobile Friendly</h4>
                        <p>Scan QR codes with your mobile device for instant product information</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h4>Multi-Role Support</h4>
                        <p>Support for farmers, processors, transporters, warehouses, and retailers</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <h4>Document Storage</h4>
                        <p>Store certificates and documents on IPFS for permanent access</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h4>Sustainability</h4>
                        <p>Promote sustainable farming practices through transparent supply chains</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h2 class="display-5 fw-bold mb-4">About AgriTrace</h2>
                    <p class="lead">
                        AgriTrace leverages blockchain technology to create a transparent, 
                        immutable record of agricultural products from farm to consumer.
                    </p>
                    <p>
                        Built on BNB Smart Chain, our system ensures that every step of the 
                        supply chain is recorded and verifiable. From harvest to retail, 
                        consumers can trace the complete journey of their food products.
                    </p>
                    <div class="d-flex gap-3">
                        <a href="dashboard/farmer.html" class="btn btn-success">
                            <i class="fas fa-seedling me-2"></i>Farmer Dashboard
                        </a>
                        <a href="dashboard/processor.html" class="btn btn-primary">
                            <i class="fas fa-industry me-2"></i>Processor Dashboard
                        </a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="about-image">
                        <i class="fas fa-globe-americas fa-10x text-primary"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5><i class="fas fa-seedling me-2"></i>AgriTrace</h5>
                    <p class="mb-0">Transparent agricultural supply chain tracking powered by blockchain.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">
                        Built on <strong>BNB Smart Chain</strong> | 
                        Powered by <strong>IPFS</strong>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Toast Notifications -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="notificationToast" class="toast" role="alert">
            <div class="toast-header">
                <i class="fas fa-info-circle text-primary me-2"></i>
                <strong class="me-auto">AgriTrace</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastMessage">
                <!-- Toast message will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="assets/js/web3.min.js"></script>
    <script src="assets/js/qrcode.min.js"></script>
    <script src="assets/js/qr-scanner.min.js"></script>
    <script src="assets/js/utils.js?v=3"></script>
    <script src="assets/js/blockchain.js?v=3"></script>
    <script src="assets/js/ipfs.js"></script>
    <script src="assets/js/app.js?v=2"></script>
</body>
</html>
