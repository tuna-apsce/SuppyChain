# AgriTrace - Há»‡ thá»‘ng Truy xuáº¥t Nguá»“n gá»‘c NÃ´ng sáº£n Blockchain

## Tá»•ng quan

AgriTrace lÃ  má»™t há»‡ thá»‘ng truy xuáº¥t nguá»“n gá»‘c nÃ´ng sáº£n Ä‘Æ°á»£c xÃ¢y dá»±ng trÃªn cÃ´ng nghá»‡ blockchain, Ä‘áº£m báº£o tÃ­nh minh báº¡ch, báº£o máº­t vÃ  cÃ³ thá»ƒ kiá»ƒm chá»©ng trong toÃ n bá»™ chuá»—i cung á»©ng nÃ´ng nghiá»‡p tá»« trang tráº¡i Ä‘áº¿n bÃ n Äƒn.

## TÃ­nh nÄƒng chÃ­nh

### ğŸ” Báº£o máº­t vÃ  Minh báº¡ch
- Ghi chÃ©p báº¥t biáº¿n trÃªn blockchain Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n dá»¯ liá»‡u
- NgÄƒn cháº·n viá»‡c giáº£ máº¡o vÃ  thay Ä‘á»•i thÃ´ng tin sáº£n pháº©m
- Truy xuáº¥t Ä‘áº§y Ä‘á»§ lá»‹ch sá»­ sáº£n pháº©m tá»« thu hoáº¡ch Ä‘áº¿n tiÃªu dÃ¹ng

### ğŸ“± Theo dÃµi Thá»i gian Thá»±c
- Theo dÃµi sáº£n pháº©m qua tá»«ng bÆ°á»›c cá»§a chuá»—i cung á»©ng
- Cáº­p nháº­t thÃ´ng tin theo thá»i gian thá»±c
- ThÃ´ng bÃ¡o tá»©c thÃ¬ vá» cÃ¡c sá»± kiá»‡n quan trá»ng

### ğŸ“± ThÃ¢n thiá»‡n vá»›i Mobile
- QuÃ©t mÃ£ QR báº±ng thiáº¿t bá»‹ di Ä‘á»™ng Ä‘á»ƒ xem thÃ´ng tin sáº£n pháº©m
- Giao diá»‡n responsive tá»‘i Æ°u cho má»i thiáº¿t bá»‹
- Há»— trá»£ camera vÃ  táº£i file áº£nh

### ğŸ‘¥ Há»— trá»£ Äa Vai trÃ²
- **NÃ´ng dÃ¢n (Farmer)**: Táº¡o sáº£n pháº©m vÃ  ghi nháº­n thu hoáº¡ch
- **NhÃ  cháº¿ biáº¿n (Processor)**: Xá»­ lÃ½ vÃ  cháº¿ biáº¿n sáº£n pháº©m
- **Váº­n chuyá»ƒn (Transporter)**: Váº­n chuyá»ƒn sáº£n pháº©m
- **Kho bÃ£i (Warehouse)**: LÆ°u trá»¯ vÃ  quáº£n lÃ½ kho
- **BÃ¡n láº» (Retailer)**: BÃ¡n sáº£n pháº©m Ä‘áº¿n ngÆ°á»i tiÃªu dÃ¹ng
- **Quáº£n trá»‹ viÃªn (Admin)**: Quáº£n lÃ½ há»‡ thá»‘ng vÃ  xÃ¡c thá»±c ngÆ°á»i dÃ¹ng

### ğŸ“„ LÆ°u trá»¯ TÃ i liá»‡u
- LÆ°u trá»¯ chá»©ng chá»‰ vÃ  tÃ i liá»‡u trÃªn IPFS
- Truy cáº­p vÄ©nh viá»…n vÃ  báº£o máº­t
- Há»— trá»£ nhiá»u Ä‘á»‹nh dáº¡ng file

### ğŸŒ± Bá»n vá»¯ng
- ThÃºc Ä‘áº©y thá»±c hÃ nh nÃ´ng nghiá»‡p bá»n vá»¯ng
- TÄƒng cÆ°á»ng niá»m tin cá»§a ngÆ°á»i tiÃªu dÃ¹ng
- Há»— trá»£ nÃ´ng nghiá»‡p há»¯u cÆ¡ vÃ  thÆ°Æ¡ng máº¡i cÃ´ng báº±ng

## CÃ´ng nghá»‡ sá»­ dá»¥ng

- **Blockchain**: BNB Smart Chain (BSC)
- **Frontend**: HTML5, CSS3, JavaScript (ES6+)
- **UI Framework**: Bootstrap 5
- **Icons**: Font Awesome 6
- **Blockchain Integration**: Web3.js
- **QR Code**: QRCode.js, QR-Scanner
- **Storage**: IPFS (InterPlanetary File System)
- **Smart Contract**: Solidity ^0.8.19

## CÃ i Ä‘áº·t vÃ  Triá»ƒn khai

### YÃªu cáº§u há»‡ thá»‘ng

- Node.js (phiÃªn báº£n 14 trá»Ÿ lÃªn)
- TrÃ¬nh duyá»‡t web hiá»‡n Ä‘áº¡i (Chrome, Firefox, Safari, Edge)
- MetaMask hoáº·c vÃ­ blockchain tÆ°Æ¡ng thÃ­ch
- Káº¿t ná»‘i internet á»•n Ä‘á»‹nh

### CÃ i Ä‘áº·t

1. **Clone repository**
   ```bash
   git clone <repository-url>
   cd supplychain
   ```

2. **CÃ i Ä‘áº·t dependencies**
   ```bash
   npm install
   ```

3. **Táº£i cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t**
   ```bash
   # Windows
   npm run setup
   
   # Linux/Mac
   npm run setup-unix
   ```

4. **Khá»Ÿi cháº¡y á»©ng dá»¥ng**
   ```bash
   # Má»Ÿ file index.html trong trÃ¬nh duyá»‡t
   # Hoáº·c sá»­ dá»¥ng local server
   python -m http.server 8000
   # Truy cáº­p: http://localhost:8000
   ```

### Cáº¥u hÃ¬nh Blockchain

1. **CÃ i Ä‘áº·t MetaMask**
   - Táº£i vÃ  cÃ i Ä‘áº·t MetaMask extension
   - Táº¡o vÃ­ má»›i hoáº·c import vÃ­ hiá»‡n cÃ³
   - ThÃªm BNB Smart Chain network

2. **Cáº¥u hÃ¬nh Smart Contract**
   - Deploy contract `AgriSupplyChain.sol` lÃªn BSC
   - Cáº­p nháº­t contract address trong `blockchain.js`
   - Cáº¥u hÃ¬nh ABI vÃ  network settings

3. **Cáº¥u hÃ¬nh IPFS**
   - Sá»­ dá»¥ng IPFS gateway cÃ´ng cá»™ng hoáº·c tá»± host
   - Cáº­p nháº­t IPFS endpoint trong `ipfs.js`

## HÆ°á»›ng dáº«n sá»­ dá»¥ng

### Cho NgÆ°á»i tiÃªu dÃ¹ng

1. **Truy cáº­p trang chá»§**
   - Má»Ÿ `index.html` trong trÃ¬nh duyá»‡t
   - Káº¿t ná»‘i vÃ­ MetaMask (tÃ¹y chá»n)

2. **QuÃ©t mÃ£ QR sáº£n pháº©m**
   - Nháº¥n nÃºt "Scan QR Code"
   - Cho phÃ©p truy cáº­p camera
   - QuÃ©t mÃ£ QR trÃªn sáº£n pháº©m

3. **Xem thÃ´ng tin sáº£n pháº©m**
   - Xem lá»‹ch sá»­ chuá»—i cung á»©ng
   - Kiá»ƒm tra thÃ´ng tin nÃ´ng dÃ¢n
   - Táº£i xuá»‘ng tÃ i liá»‡u liÃªn quan

### Cho NÃ´ng dÃ¢n

1. **ÄÄƒng kÃ½ tÃ i khoáº£n**
   - Truy cáº­p `register.html`
   - Chá»n vai trÃ² "Farmer"
   - Nháº­p thÃ´ng tin cÃ´ng ty
   - Chá» admin xÃ¡c thá»±c

2. **Táº¡o sáº£n pháº©m má»›i**
   - ÄÄƒng nháº­p Farmer Dashboard
   - Nháº¥n "Create Product"
   - Äiá»n thÃ´ng tin sáº£n pháº©m:
     - TÃªn sáº£n pháº©m
     - Loáº¡i sáº£n pháº©m
     - Nguá»“n gá»‘c
     - NgÃ y thu hoáº¡ch
     - NgÃ y háº¿t háº¡n
     - Sá»‘ lÆ°á»£ng
     - ÄÆ¡n vá»‹
   - Táº£i lÃªn tÃ i liá»‡u (tÃ¹y chá»n)

3. **Ghi nháº­n sá»± kiá»‡n thu hoáº¡ch**
   - Chá»n sáº£n pháº©m tá»« danh sÃ¡ch
   - Nháº¥n "Add Harvest Event"
   - Äiá»n thÃ´ng tin:
     - Vá»‹ trÃ­ thu hoáº¡ch
     - Ghi chÃº
     - TÃ i liá»‡u cháº¥t lÆ°á»£ng

### Cho NhÃ  cháº¿ biáº¿n

1. **ÄÄƒng kÃ½ vÃ  xÃ¡c thá»±c**
   - ÄÄƒng kÃ½ vá»›i vai trÃ² "Processor"
   - Chá» admin xÃ¡c thá»±c

2. **Xá»­ lÃ½ sáº£n pháº©m**
   - Truy cáº­p Processor Dashboard
   - Chá»n sáº£n pháº©m cáº§n xá»­ lÃ½
   - ThÃªm sá»± kiá»‡n xá»­ lÃ½:
     - PhÆ°Æ¡ng phÃ¡p xá»­ lÃ½
     - Kiá»ƒm tra cháº¥t lÆ°á»£ng
     - TÃ i liá»‡u chá»©ng nháº­n

### Cho Váº­n chuyá»ƒn

1. **ÄÄƒng kÃ½ tÃ i khoáº£n**
   - Chá»n vai trÃ² "Transporter"
   - Cung cáº¥p thÃ´ng tin cÃ´ng ty váº­n chuyá»ƒn

2. **Ghi nháº­n váº­n chuyá»ƒn**
   - Nháº­n sáº£n pháº©m tá»« nÃ´ng dÃ¢n/nhÃ  cháº¿ biáº¿n
   - ThÃªm sá»± kiá»‡n "Transport Start"
   - Giao hÃ ng vÃ  thÃªm sá»± kiá»‡n "Transport End"

### Cho Kho bÃ£i

1. **Quáº£n lÃ½ kho**
   - ÄÄƒng kÃ½ vá»›i vai trÃ² "Warehouse"
   - Nháº­n sáº£n pháº©m vÃ o kho (Warehouse In)
   - Xuáº¥t kho (Warehouse Out)

### Cho BÃ¡n láº»

1. **BÃ¡n hÃ ng**
   - ÄÄƒng kÃ½ vá»›i vai trÃ² "Retailer"
   - Nháº­n sáº£n pháº©m (Retail Receive)
   - BÃ¡n cho khÃ¡ch hÃ ng (Sale)

### Cho Quáº£n trá»‹ viÃªn

1. **Quáº£n lÃ½ ngÆ°á»i dÃ¹ng**
   - Truy cáº­p Admin Dashboard
   - Xem danh sÃ¡ch ngÆ°á»i dÃ¹ng Ä‘Äƒng kÃ½
   - XÃ¡c thá»±c hoáº·c tá»« chá»‘i ngÆ°á»i dÃ¹ng
   - KÃ­ch hoáº¡t/vÃ´ hiá»‡u hÃ³a tÃ i khoáº£n

2. **GiÃ¡m sÃ¡t há»‡ thá»‘ng**
   - Xem thá»‘ng kÃª tá»•ng quan
   - Theo dÃµi sáº£n pháº©m vÃ  sá»± kiá»‡n
   - Quáº£n lÃ½ há»£p Ä‘á»“ng thÃ´ng minh

## Cáº¥u trÃºc dá»± Ã¡n

```
supplychain/
â”œâ”€â”€ index.html                 # Trang chá»§
â”œâ”€â”€ register.html              # ÄÄƒng kÃ½ ngÆ°á»i dÃ¹ng
â”œâ”€â”€ admin-setup.html           # Thiáº¿t láº­p admin
â”œâ”€â”€ admin-approval.html        # PhÃª duyá»‡t admin
â”œâ”€â”€ package.json              # Cáº¥u hÃ¬nh npm
â”œâ”€â”€ contracts/
â”‚   â””â”€â”€ AgriSupplyChain.sol   # Smart contract
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ css/                  # Stylesheets
â”‚   â”‚   â”œâ”€â”€ main.css
â”‚   â”‚   â”œâ”€â”€ components.css
â”‚   â”‚   â””â”€â”€ dashboard.css
â”‚   â”œâ”€â”€ js/                   # JavaScript files
â”‚   â”‚   â”œâ”€â”€ app.js           # á»¨ng dá»¥ng chÃ­nh
â”‚   â”‚   â”œâ”€â”€ blockchain.js    # TÃ­ch há»£p blockchain
â”‚   â”‚   â”œâ”€â”€ ipfs.js          # TÃ­ch há»£p IPFS
â”‚   â”‚   â”œâ”€â”€ utils.js         # Tiá»‡n Ã­ch
â”‚   â”‚   â””â”€â”€ web3.min.js      # Web3 library
â”‚   â””â”€â”€ images/              # HÃ¬nh áº£nh
â”œâ”€â”€ dashboard/               # Dashboards cho tá»«ng vai trÃ²
â”‚   â”œâ”€â”€ admin.html
â”‚   â”œâ”€â”€ farmer.html
â”‚   â”œâ”€â”€ processor.html
â”‚   â”œâ”€â”€ transporter.html
â”‚   â”œâ”€â”€ warehouse.html
â”‚   â””â”€â”€ retailer.html
â””â”€â”€ test-*.html             # CÃ¡c file test
```

## API vÃ  Smart Contract

### Smart Contract Functions

#### Quáº£n lÃ½ ngÆ°á»i dÃ¹ng
- `registerUser(role, companyName)`: ÄÄƒng kÃ½ ngÆ°á»i dÃ¹ng má»›i
- `verifyUser(address)`: XÃ¡c thá»±c ngÆ°á»i dÃ¹ng (chá»‰ admin)
- `activateUser(address)`: KÃ­ch hoáº¡t ngÆ°á»i dÃ¹ng
- `deactivateUser(address)`: VÃ´ hiá»‡u hÃ³a ngÆ°á»i dÃ¹ng

#### Quáº£n lÃ½ sáº£n pháº©m
- `createProduct(batchId, productName, category, origin, harvestDate, expiryDate, quantity, unit, ipfsHash)`: Táº¡o sáº£n pháº©m má»›i
- `addEvent(batchId, eventType, location, ipfsHash, notes)`: ThÃªm sá»± kiá»‡n chuá»—i cung á»©ng

#### Truy váº¥n dá»¯ liá»‡u
- `getProduct(batchId)`: Láº¥y thÃ´ng tin sáº£n pháº©m
- `getEvents(batchId)`: Láº¥y lá»‹ch sá»­ sá»± kiá»‡n
- `getUser(address)`: Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng
- `getAllBatchIds()`: Láº¥y danh sÃ¡ch táº¥t cáº£ batch ID

### Event Types

- `HARVEST`: Thu hoáº¡ch
- `PROCESSING`: Cháº¿ biáº¿n
- `TRANSPORT_START`: Báº¯t Ä‘áº§u váº­n chuyá»ƒn
- `TRANSPORT_END`: Káº¿t thÃºc váº­n chuyá»ƒn
- `WAREHOUSE_IN`: Nháº­p kho
- `WAREHOUSE_OUT`: Xuáº¥t kho
- `RETAIL_RECEIVE`: Nháº­n hÃ ng bÃ¡n láº»
- `SALE`: BÃ¡n hÃ ng

## Báº£o máº­t

### Smart Contract Security
- Sá»­ dá»¥ng modifiers Ä‘á»ƒ kiá»ƒm soÃ¡t quyá»n truy cáº­p
- Validation Ä‘áº§u vÃ o Ä‘áº§y Ä‘á»§
- TrÃ¡nh reentrancy attacks
- Safe math operations

### Frontend Security
- Sanitization HTML Ä‘á»ƒ trÃ¡nh XSS
- Validation dá»¯ liá»‡u phÃ­a client
- Secure communication vá»›i blockchain
- IPFS content verification

## Kháº¯c phá»¥c sá»± cá»‘

### Lá»—i thÆ°á»ng gáº·p

1. **KhÃ´ng thá»ƒ káº¿t ná»‘i vÃ­**
   - Kiá»ƒm tra MetaMask Ä‘Ã£ cÃ i Ä‘áº·t
   - Äáº£m báº£o Ä‘Ã£ thÃªm BSC network
   - Kiá»ƒm tra káº¿t ná»‘i internet

2. **Lá»—i camera khÃ´ng hoáº¡t Ä‘á»™ng**
   - Sá»­ dá»¥ng HTTPS hoáº·c localhost
   - Cho phÃ©p quyá»n truy cáº­p camera
   - Sá»­ dá»¥ng tÃ¹y chá»n táº£i file áº£nh

3. **Lá»—i IPFS**
   - Kiá»ƒm tra káº¿t ná»‘i IPFS gateway
   - Thá»­ gateway khÃ¡c
   - Kiá»ƒm tra file size limits

4. **Lá»—i Smart Contract**
   - Kiá»ƒm tra contract address
   - XÃ¡c nháº­n network Ä‘Ãºng
   - Kiá»ƒm tra gas fees

### Debug Mode

KÃ­ch hoáº¡t debug mode báº±ng cÃ¡ch thÃªm `?debug=true` vÃ o URL:
```
http://localhost:8000/index.html?debug=true
```

## ÄÃ³ng gÃ³p

1. Fork repository
2. Táº¡o feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Táº¡o Pull Request

## Giáº¥y phÃ©p

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c phÃ¢n phá»‘i dÆ°á»›i giáº¥y phÃ©p MIT. Xem file `LICENSE` Ä‘á»ƒ biáº¿t thÃªm thÃ´ng tin.

## LiÃªn há»‡

- **Email**: nguyenanhtu10203@gmail.com
- **Phone**: 0339010737
---

**AgriTrace** - Minh báº¡ch tá»« trang tráº¡i Ä‘áº¿n bÃ n Äƒn ğŸŒ±
